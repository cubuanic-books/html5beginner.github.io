<!DOCTYPE html>
<html lang="ru">

<head>
   <title>HTML5 Geolocation. Геолокация. W3schools на русском. Уроки для начинающих</title>
   <meta charset="utf-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1" />
   <meta name="keywords" content="HTML,CSS,уроки,для начинающих,html5,geolocation,геолокация,элементы,теги,w3schools,на русском,языке" />
   <meta name="description" content="HTML5 Геолокация. Что такое геолокация на веб-сайте? Определение места нахождения пользователя. W3Schools на русском. Учебник для начинающих" />
   <link rel="icon" href="/favicon.ico" type="image/x-icon" />
   <link rel="stylesheet" href="../styles/style.css" />
   <link rel="stylesheet" href="../styles/ws.css" />
   <link rel="stylesheet" href="../styles/handheld.css" />
   <link rel="stylesheet" href="../styles/w3colors.css" />
   <link rel="stylesheet" type="text/css" href="../styles/browserref.css">
   <script src="../js/topnav.js"></script>
</head>

<body>
   <iframe src="../pages/header.html" class="frame-header"></iframe>
   <main>
      <div class="left-sidebar">
         <iframe src="../pages/basichtml.html" class="frame-left-sidebar"></iframe>
      </div>
      <!-- CONTENT -->
      <div class="content">
         <h1>HTML5 Геолокация</h1>
         <p class="brief"><strong>Курс по основам HTML5. W3Schools на русском языке. Уроки для начинающих</strong></p>
         <hr>

         <div class="w3-clear nextprev">
            <a class="w3-left w3-btn" href="html_youtube.html" title="Предыдущая страница" rel="prev">❮ Prev</a>
            <a class="w3-right w3-btn" href="html5_draganddrop.html" title="Следующая страница" rel="next">Next ❯</a>
         </div>

         <hr>
         <p class="intro" id="demo">API геолокации HTML используется для места нахождения пользователя.</p>
         <p><button class="w3-btn w3-blue" onclick="getLocation()">Попробуй это</button></p>
         <div id="mapholder"></div>
         <script src="https://maps.google.com/maps/api/js?key=AIzaSyBu-916DdpKAjTmJNIgngS6HL_kDIKU0aU"></script>
         <script>
            var x = document.getElementById("demo");

            function getLocation() {
               if (navigator.geolocation) {
                  navigator.geolocation.getCurrentPosition(showPosition, showError);
               } else {
                  x.innerHTML = "Этот веб-браузер не поддерживает геолокацию.";
               }
            }

            function showPosition(position) {
               var lat = position.coords.latitude;
               var lon = position.coords.longitude;
               var latlon = new google.maps.LatLng(lat, lon)
               var mapholder = document.getElementById('mapholder')
               mapholder.style.height = '250px';
               mapholder.style.width = '100%';
               var myOptions = {
                  center: latlon,
                  zoom: 14,
                  mapTypeId: google.maps.MapTypeId.ROADMAP,
                  mapTypeControl: false,
                  navigationControlOptions: {
                     style: google.maps.NavigationControlStyle.SMALL
                  }
               };
               var map = new google.maps.Map(document.getElementById("mapholder"), myOptions);
               var marker = new google.maps.Marker({
                  position: latlon,
                  map: map,
                  title: "Вы здесь!"
               });
            }

            function showError(error) {
               switch (error.code) {
                  case error.PERMISSION_DENIED:
                     x.innerHTML = "Пользователь отклонил запрос на геолокацию."
                     break;
                  case error.POSITION_UNAVAILABLE:
                     x.innerHTML = "Информация о местонахождении недоступна."
                     break;
                  case error.TIMEOUT:
                     x.innerHTML = "Время ожидания запроса на получение местонахождения пользователя заканчивается."
                     break;
                  case error.UNKNOWN_ERROR:
                     x.innerHTML = "Произошла неизвестная ошибка."
                     break;
               }
            }
         </script>
         <hr>
         <h2>Найдите позицию пользователя</h2>
         <p>API геолокации HTML используется для получения географического положения пользователя.</p>
         <p>Поскольку это может нарушить конфиденциальность, позиция недоступна до тех пор, пока пользователь не согласиться с этим.</p>
         <div class="w3-panel w3-note">
            <p><strong>Примечание:</strong><b> </b>Геолокация является наиболее точной для устройств с GPS, таких как смартфон.</p>
         </div>
         <hr>
         <h2>Поддержка браузерами</h2>
         <p>Цифры в таблице определяют первую версию браузера, которая полностью поддерживает геолокацию.</p>
         <table class="browserref notranslate">
            <tbody>
               <tr>
                  <th style="width:20%;font-size:16px;text-align:left;">API</th>
                  <th style="width:16%;" class="bsChrome" title="Chrome"></th>
                  <th style="width:16%;" class="bsEdge" title="Internet Explorer / Edge"></th>
                  <th style="width:16%;" class="bsFirefox" title="Firefox"></th>
                  <th style="width:16%;" class="bsSafari" title="Safari"></th>
                  <th style="width:16%;" class="bsOpera" title="Opera"></th>
               </tr>
               <tr>
                  <td style="text-align:left;">Geolocation</td>
                  <td>5.0 - 49.0 (http)<br>50.0 (https)</td>
                  <td>9.0</td>
                  <td>3.5</td>
                  <td>5.0</td>
                  <td>16.0</td>
               </tr>
            </tbody>
         </table>
         <div class="w3-panel w3-note">
            <p><strong>Примечание:</strong> Начиная с Chrome 50, API Геолокация будет работать только при безопасном соединении, таком как HTTPS. Если ваш сайт размещён на незащищенном источнике (например, HTTP), запросы на получение местоположения пользователей больше не будут функционировать.</p>
         </div>
         <hr>
         <h2>Использование HTML Геолокации</h2>
         <p>Метод <code class="w3-codespan">getCurrentPosition()</code> используется для возвращения позиции пользователя.</p>
         <p>Приведённый ниже пример возвращает широту и долготу позиции пользователя:</p>
         <div class="w3-example">
            <h3>Пример:</h3>
            <div class="w3-code notranslate htmlHigh">
               <span class="tagnamecolor" style="color:brown"><span class="tagcolor" style="color:mediumblue">&lt;</span>script<span class="tagcolor" style="color:mediumblue">&gt;</span></span><span class="jscolor" style="color:black"><br><span class="jskeywordcolor" style="color:mediumblue">var</span> x = document.<span class="jspropertycolor" style="color:black">getElementById</span>(<span class="jsstringcolor" style="color:brown">"demo"</span>);<br><span class="jskeywordcolor" style="color:mediumblue">function</span> getLocation() {<br>&nbsp;&nbsp;<span class="jskeywordcolor" style="color:mediumblue">if</span> (navigator.<span class="jspropertycolor" style="color:black">geolocation</span>) {<br><span class="jsnumbercolor" style="color:red">
                  </span> &nbsp;&nbsp;&nbsp; navigator.<span class="jspropertycolor" style="color:black">geolocation</span>.<span class="jspropertycolor" style="color:black">getCurrentPosition</span>(showPosition);<br>&nbsp;&nbsp;} <span class="jskeywordcolor" style="color:mediumblue">else</span> {<br><span class="jsnumbercolor" style="color:red">
                  </span> &nbsp;&nbsp;&nbsp; x.<span class="jspropertycolor" style="color:black">innerHTML</span> = <span class="jsstringcolor" style="color:brown">"Geolocation is not supported by this browser."</span>;<br><span class="jsnumbercolor" style="color:red">
                  </span> &nbsp;&nbsp;}<br>}<br><br><span class="jsnumbercolor" style="color:red">
                  </span> <span class="jskeywordcolor" style="color:mediumblue">function</span> showPosition(position) {<br>&nbsp; x.<span class="jspropertycolor" style="color:black">innerHTML</span> = <span class="jsstringcolor" style="color:brown">"Latitude: "</span> + position.<span class="jspropertycolor" style="color:black">coords</span>.<span class="jspropertycolor" style="color:black">latitude</span> + <br>&nbsp;&nbsp;<span class="jsstringcolor" style="color:brown">"&lt;br&gt;Longitude: "</span> + position.<span class="jspropertycolor" style="color:black">coords</span>.<span class="jspropertycolor" style="color:black">longitude</span>; <br><span class="jsnumbercolor" style="color:red">
                  </span> }<br></span><span class="tagnamecolor" style="color:brown"><span class="tagcolor" style="color:mediumblue">&lt;</span>/script<span class="tagcolor" style="color:mediumblue">&gt;</span></span> </div>
            <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/html/tryit.asp?filename=tryhtml5_geolocation" target="_blank" rel="nofollow">Попробуйте сами »</a>
         </div>
         <p>Объяснение примера:</p>
         <ul>
            <li>Проверяем, поддерживается ли геолокация;</li>
            <li>Если поддерживается, запускаем метод getCurrentPosition(). Если нет, то отображаем сообщение пользователю;</li>
            <li>Если метод getCurrentPosition() успешен, он возвращает объект координат к функции, указанной в параметре (showPosition);</li>
            <li>Функция showPosition() выводит широту и долготу.</li>
         </ul>
         <p>Приведённый выше пример является очень простым базовым скриптом геолокации без обработки ошибок.</p>
         <hr>
         <h2>Обработка ошибок и отказов</h2>
         <p>Другой параметр метода <code class="w3-codespan">getCurrentPosition()</code> используется для обработки ошибок. Он определяет функцию для запуска, если не удалось получить местонахождение пользователя:</p>
         <div class="w3-example">
            <h3>Пример:</h3>
            <div class="w3-code notranslate jsHigh"><span class="jscolor" style="color:black"><span class="jsnumbercolor" style="color:red">
                  </span> <span class="jskeywordcolor" style="color:mediumblue">function</span> showError(error) {<br>&nbsp;&nbsp;<span class="jskeywordcolor" style="color:mediumblue">switch</span>(error.<span class="jspropertycolor" style="color:black">code</span>) {<br>&nbsp;&nbsp;&nbsp; <span class="jskeywordcolor" style="color:mediumblue">case</span> error.<span class="jspropertycolor" style="color:black">PERMISSION_DENIED</span>:<br><span class="jsnumbercolor" style="color:red">
                  </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.<span class="jspropertycolor" style="color:black">innerHTML</span> = <span class="jsstringcolor" style="color:brown">"User denied the request for Geolocation."</span><br><span class="jsnumbercolor" style="color:red">
                  </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="jskeywordcolor" style="color:mediumblue">break</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="jskeywordcolor" style="color:mediumblue">case</span> error.<span class="jspropertycolor" style="color:black">POSITION_UNAVAILABLE</span>:<br><span class="jsnumbercolor" style="color:red">
                  </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.<span class="jspropertycolor" style="color:black">innerHTML</span> = <span class="jsstringcolor" style="color:brown">"Location information is unavailable."</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="jskeywordcolor" style="color:mediumblue">break</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="jskeywordcolor" style="color:mediumblue">case</span> error.<span class="jspropertycolor" style="color:black">TIMEOUT</span>:<br><span class="jsnumbercolor" style="color:red">
                  </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; x.<span class="jspropertycolor" style="color:black">innerHTML</span> = <span class="jsstringcolor" style="color:brown">"The request to get user location timed out."</span><br><span class="jsnumbercolor" style="color:red">
                  </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="jskeywordcolor" style="color:mediumblue">break</span>;<br>&nbsp;&nbsp;&nbsp; <span class="jskeywordcolor" style="color:mediumblue">case</span> error.<span class="jspropertycolor" style="color:black">UNKNOWN_ERROR</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x.<span class="jspropertycolor" style="color:black">innerHTML</span> = <span class="jsstringcolor" style="color:brown">"An unknown error occurred."</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="jskeywordcolor" style="color:mediumblue">break</span>;<br><span class="jsnumbercolor" style="color:red">
                  </span> &nbsp;&nbsp;}<br><span class="jsnumbercolor" style="color:red">
                  </span> } </span></div>
            <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/html/tryit.asp?filename=tryhtml5_geolocation_error" target="_blank" rel="nofollow">Попробуйте сами »</a>
         </div>
         <hr>
         <h2>Отображение результата на карте</h2>
         <p>Чтобы отобразить результат на карте, нужен доступ к сервису карт, например, до Карт Google.</p>
         <p>В приведённом ниже примере возвращённая широта и долгота используются для отображения местонахождения на карте Google (с помощью статического изображения):</p>
         <div class="w3-example">
            <h3>Пример:</h3>
            <div class="w3-code notranslate jsHigh"><span class="jscolor" style="color:black"><span class="jsnumbercolor" style="color:red">
                  </span> <span class="jskeywordcolor" style="color:mediumblue">function</span> showPosition(position) {<br>&nbsp;&nbsp;<span class="jskeywordcolor" style="color:mediumblue">var</span> latlon = position.<span class="jspropertycolor" style="color:black">coords</span>.<span class="jspropertycolor" style="color:black">latitude</span> + <span class="jsstringcolor" style="color:brown">","</span> + position.<span class="jspropertycolor" style="color:black">coords</span>.<span class="jspropertycolor" style="color:black">longitude</span>;<br><br>&nbsp;&nbsp;<span class="jskeywordcolor" style="color:mediumblue">var</span> img_url = <span class="jsstringcolor" style="color:brown">"https://maps.googleapis.com/maps/api/staticmap?center=<br>
                     &nbsp;&nbsp;"</span>+latlon+<span class="jsstringcolor" style="color:brown">"&amp;zoom=14&amp;size=400x300&amp;sensor=false&amp;key=YOUR_:KEY"</span>;<br><br><span class="jsnumbercolor" style="color:red">
                  </span> &nbsp;&nbsp;document.<span class="jspropertycolor" style="color:black">getElementById</span>(<span class="jsstringcolor" style="color:brown">"mapholder"</span>).<span class="jspropertycolor" style="color:black">innerHTML</span> = <span class="jsstringcolor" style="color:brown">"&lt;img src='"</span>+img_url+<span class="jsstringcolor" style="color:brown">"'&gt;"</span>;<br><span class="jsnumbercolor" style="color:red">
                  </span> }<br> </span></div>
            <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/html/tryit.asp?filename=tryhtml5_geolocation_map" target="_blank" rel="nofollow">Попробуйте сами &raquo;</a>
         </div>
         <!--
        <p><a href="https://www.w3schools.com/html/tryit.asp?filename=tryhtml5_geolocation_map_script" target="_blank">Google Map Script</a><br>
            Як показати інтерактивну карту Google за допомогою маркера, параметрів масштабування та перетягування.</p>
            -->
         <hr>

         <h2>Информация, которая касается местонахождения</h2>
         <p>На этой странице показано, как отобразить позицию пользователя на карте.</p>
         <p>Геолокация также очень полезна для конкретной информации о местонахождении, например:</p>
         <ul>
            <li>Актуальная местная информация;</li>
            <li>Отображение интересных мест возле пользователя;</li>
            <li>Пошаговая навигация (GPS).</li>
         </ul>
         <hr>
         <h2>Метод <i>getCurrentPosition()</i> - возвращение данных</h2>
         <p>Метод <code class="w3-codespan">getCurrentPosition()</code> возвращает объект в случае успеха. Свойства широты, долготы и точности всегда возвращаются. Другие свойства возвращаются, если доступны:</p>
         <table class="w3-table-all notranslate">
            <tbody>
               <tr>
                  <th style="width:150px">Свойство</th>
                  <th>Возвращение</th>
               </tr>
               <tr>
                  <td>coords.latitude</td>
                  <td>Широта как десятичное число (всегда возвращается)</td>
               </tr>
               <tr>
                  <td>coords.longitude</td>
                  <td>Долгота как десятичное число (всегда возвращается)</td>
               </tr>
               <tr>
                  <td>coords.accuracy</td>
                  <td>Точность позиции (всегда возвращается)</td>
               </tr>
               <tr>
                  <td>coords.altitude</td>
                  <td>Высота в метрах выше среднего уровня моря (возвращается, если есть)</td>
               </tr>
               <tr>
                  <td>coords.altitudeAccuracy</td>
                  <td>Точность позиции высоты (возвращается, если доступна)</td>
               </tr>
               <tr>
                  <td>coords.heading</td>
                  <td>Направление в градусах по часовой стрелке от Севера (возвращается, если доступно)</td>
               </tr>
               <tr>
                  <td>coords.speed</td>
                  <td>Скорость в метрах в секунду (возвращается, если доступно)</td>
               </tr>
               <tr>
                  <td>timestamp</td>
                  <td>Дата / время ответа (возвращается, если доступно)</td>
               </tr>
            </tbody>
         </table>
         <hr>
         <h2>Объект геолокации - другие интересные методы</h2>
         <p>Объект геолокации - также другие интересные методы:</p>
         <ul>
            <li><code class="w3-codespan">watchPosition()</code> - Возвращает текущую позицию пользователя и продолжает возвращать обновленную позицию, когда пользователь перемещается (например, GPS в автомобиле).</li>
            <li><code class="w3-codespan">clearWatch()</code> - останавливает метод <code class="w3-codespan">watchPosition()</code>.</li>
         </ul>
         <p>Приведенный ниже пример показывает метод <code class="w3-codespan">watchPosition()</code>. Для тестирования требуется точное устройство GPS (например, смартфон): </p>
         <div class="w3-example">
            <h3>Пример:</h3>
            <div class="w3-code notranslate htmlHigh">
               <span class="tagnamecolor" style="color:brown"><span class="tagcolor" style="color:mediumblue">&lt;</span>script<span class="tagcolor" style="color:mediumblue">&gt;</span></span><span class="jscolor" style="color:black"><br><span class="jskeywordcolor" style="color:mediumblue">var</span> x = document.<span class="jspropertycolor" style="color:black">getElementById</span>(<span class="jsstringcolor" style="color:brown">"demo"</span>);<br><span class="jskeywordcolor" style="color:mediumblue">function</span> getLocation() {<br><span class="jsnumbercolor" style="color:red">
                  </span> &nbsp; <span class="jskeywordcolor" style="color:mediumblue">if</span> (navigator.<span class="jspropertycolor" style="color:black">geolocation</span>) {<br>&nbsp;&nbsp;&nbsp; navigator.<span class="jspropertycolor" style="color:black">geolocation</span>.<span class="jspropertycolor" style="color:black">watchPosition</span>(showPosition);<br>&nbsp;&nbsp;} <span class="jskeywordcolor" style="color:mediumblue">else</span> {<br><span class="jsnumbercolor" style="color:red">
                  </span> &nbsp;&nbsp;&nbsp; x.<span class="jspropertycolor" style="color:black">innerHTML</span> = <span class="jsstringcolor" style="color:brown">"Geolocation is not supported by this browser."</span>;<br><span class="jsnumbercolor" style="color:red">
                  </span> &nbsp;&nbsp;}<br>}<br><span class="jsnumbercolor" style="color:red">
                  </span> <span class="jskeywordcolor" style="color:mediumblue">function</span> showPosition(position) {<br>&nbsp; x.<span class="jspropertycolor" style="color:black">innerHTML</span> = <span class="jsstringcolor" style="color:brown">"Latitude: "</span> + position.<span class="jspropertycolor" style="color:black">coords</span>.<span class="jspropertycolor" style="color:black">latitude</span> + <br>&nbsp;&nbsp;<span class="jsstringcolor" style="color:brown">"&lt;br&gt;Longitude: "</span> + position.<span class="jspropertycolor" style="color:black">coords</span>.<span class="jspropertycolor" style="color:black">longitude</span>; <br><span class="jsnumbercolor" style="color:red">
                  </span> }<br></span><span class="tagnamecolor" style="color:brown"><span class="tagcolor" style="color:mediumblue">&lt;</span>/script<span class="tagcolor" style="color:mediumblue">&gt;</span></span> </div>
            <a class="w3-btn w3-margin-bottom" href="https://www.w3schools.com/html/tryit.asp?filename=tryhtml5_geolocation_watchposition" target="_blank">Попробуйте самі »</a>
         </div>
         <hr>

         <div class="w3-clear nextprev">
            <a class="w3-left w3-btn" href="html_youtube.html" title="Предыдущая страница" rel="prev">❮ Prev</a>
            <a class="w3-right w3-btn" href="html5_draganddrop.html" title="Следующая страница" rel="next">Next ❯</a>
         </div>

         <iframe class="predisqus" src="../pages/predisqus.html"></iframe>
         <!-- Комментарии от Disqus -->
         <div id="disqus_thread"></div>
         <script>
            var disqus_config = function() {
               this.page.url = html5beginner.github.io; // канонический URL страницы
               this.page.identifier = html5beginner.github.io / html / html5_geolocation.html; // уникальный идентификатор страницы
            };
            (function() { // Не редактировать ниже этой линии
               var d = document,
                  s = d.createElement('script');
               s.src = 'https://html5beginner-1.disqus.com/embed.js';
               s.setAttribute('data-timestamp', +new Date());
               (d.head || d.body).appendChild(s);
            })();
         </script>
         <noscript>Пожалуйста, включите JavaScript для просмотра <a href="https://disqus.com/?ref_noscript">комментариев, предоставленных Disqus.</a></noscript>
         <!--  / Комментарии от Disqus -->
      </div>
      <!-- / CONTENT -->
      <div class="right-sidebar">
         <iframe src="../pages/source.html" class="frame-right-sidebar"></iframe>
      </div>
   </main>
   <footer>
      <iframe src="../pages/footer.html" class="frame-footer"></iframe>
   </footer>
</body>

</html>